for %%i in (1433,1434,8085,8087,21007,22118,21090,21008,20903,20904,20911,20910,24008,21077,22220,21058,22175,22153,21030,21055,22401,22432,10002,30003,22212,21005,22252,22199,21051,22179,21056,21031,22215,21060,21111,21035,22228,21010,22101,20978,22112,21050,20901,20902,22219,21032,21004,21034,21053,22141,22302,22322,22323,22331,22332,22537,22350,5000,22003,22222,22223,7777,22327,20993,21919,22207,22214,22135,20985,22136,10000,22216,22297,1550) do echo "10.244.39.101 %%i" | \ while read host port; do r=$(bash -c 'exec 3<> /dev/tcp/'$host'/'$port';echo $?' 2>/dev/null) if [ "$r" = "0" ]; then echo $host $port is open else echo $host $port is closed fi done